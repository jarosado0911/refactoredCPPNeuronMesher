<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>refactoredCPPNeuronMesher: src/viewercpp/callbacks.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">refactoredCPPNeuronMesher
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_59bc398907f2202e9a20327dc1db41a6.html">viewercpp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">callbacks.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of GLFW callback functions for the neuron viewer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="callbacks_8h_source.html">callbacks.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for callbacks.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="callbacks_8cpp__incl.png" border="0" usemap="#asrc_2viewercpp_2callbacks_8cpp" alt=""/></div>
<map name="asrc_2viewercpp_2callbacks_8cpp" id="asrc_2viewercpp_2callbacks_8cpp">
<area shape="rect" title="Implementation of GLFW callback functions for the neuron viewer." alt="" coords="193,5,379,32"/>
<area shape="rect" href="globals_8h.html" title="Global state variables for the neuron visualization." alt="" coords="126,155,201,181"/>
<area shape="rect" href="callbacks_8h.html" title="GLFW input handling callbacks for neuron visualization." alt="" coords="334,80,422,107"/>
<area shape="rect" title=" " alt="" coords="85,304,143,331"/>
<area shape="rect" title=" " alt="" coords="5,304,60,331"/>
<area shape="rect" title=" " alt="" coords="110,229,217,256"/>
<area shape="rect" title=" " alt="" coords="1119,304,1191,331"/>
<area shape="rect" href="neurongraph_8h.html" title="Definition of the NeuronGraph class for handling neuron morphology data." alt="" coords="529,229,633,256"/>
<area shape="rect" href="opgl__utils_8h.html" title="OpenGL utility functions for neuron visualization." alt="" coords="334,155,422,181"/>
<area shape="rect" title=" " alt="" coords="634,304,701,331"/>
<area shape="rect" title=" " alt="" coords="725,304,794,331"/>
<area shape="rect" title=" " alt="" coords="819,304,865,331"/>
<area shape="rect" title=" " alt="" coords="890,304,930,331"/>
<area shape="rect" title=" " alt="" coords="955,304,1012,331"/>
<area shape="rect" title=" " alt="" coords="1037,304,1095,331"/>
<area shape="rect" title=" " alt="" coords="168,304,236,331"/>
<area shape="rect" title=" " alt="" coords="261,304,314,331"/>
<area shape="rect" title=" " alt="" coords="338,304,405,331"/>
<area shape="rect" title=" " alt="" coords="429,304,503,331"/>
<area shape="rect" title=" " alt="" coords="527,304,610,331"/>
<area shape="rect" href="tinyfiledialogs_8h.html" title=" " alt="" coords="291,229,403,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0b9e239c8889734711f29fe45551605b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="callbacks_8cpp.html#a0b9e239c8889734711f29fe45551605b">keyCallback</a> (GLFWwindow *window, int key, int scancode, int action, int mods)</td></tr>
<tr class="memdesc:a0b9e239c8889734711f29fe45551605b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles keyboard input events for the neuron viewer.  <a href="callbacks_8cpp.html#a0b9e239c8889734711f29fe45551605b">More...</a><br /></td></tr>
<tr class="separator:a0b9e239c8889734711f29fe45551605b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae41a3951e1196401047b29ad1d37c6ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="callbacks_8cpp.html#ae41a3951e1196401047b29ad1d37c6ae">mouseButtonCallback</a> (GLFWwindow *window, int button, int action, int mods)</td></tr>
<tr class="memdesc:ae41a3951e1196401047b29ad1d37c6ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles mouse button events for 3D view manipulation.  <a href="callbacks_8cpp.html#ae41a3951e1196401047b29ad1d37c6ae">More...</a><br /></td></tr>
<tr class="separator:ae41a3951e1196401047b29ad1d37c6ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae49f0c4c2064be8fbcf555f46460b7df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="callbacks_8cpp.html#ae49f0c4c2064be8fbcf555f46460b7df">cursorPosCallback</a> (GLFWwindow *window, double xpos, double ypos)</td></tr>
<tr class="memdesc:ae49f0c4c2064be8fbcf555f46460b7df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles mouse cursor movement for view manipulation.  <a href="callbacks_8cpp.html#ae49f0c4c2064be8fbcf555f46460b7df">More...</a><br /></td></tr>
<tr class="separator:ae49f0c4c2064be8fbcf555f46460b7df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9b224479e8c1cc5251b8e7f3fdabacd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="callbacks_8cpp.html#aa9b224479e8c1cc5251b8e7f3fdabacd">scrollCallback</a> (GLFWwindow *window, double xoffset, double yoffset)</td></tr>
<tr class="memdesc:aa9b224479e8c1cc5251b8e7f3fdabacd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles mouse scroll wheel events for zooming the view.  <a href="callbacks_8cpp.html#aa9b224479e8c1cc5251b8e7f3fdabacd">More...</a><br /></td></tr>
<tr class="separator:aa9b224479e8c1cc5251b8e7f3fdabacd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of GLFW callback functions for the neuron viewer. </p>
<p>This file contains the implementation of various GLFW callback functions that handle user input and interaction with the neuron visualization window. It includes keyboard, mouse, and scroll wheel event handling for controlling the 3D view and interacting with neuron data.</p>
<p>Key features:</p><ul>
<li>Keyboard shortcuts for view manipulation (rotation, zoom, pan)</li>
<li>Mouse interaction for 3D view control</li>
<li>File I/O operations (open/save)</li>
<li>Interactive refinement of neuron geometry</li>
<li>Help system display</li>
</ul>
<p>The implementation uses GLFW for window management and input handling, and integrates with the <a class="el" href="classNeuronGraph.html" title="Class for representing and processing neuron morphology graphs.">NeuronGraph</a> class for neuron data manipulation.</p>
<dl class="section author"><dt>Author</dt><dd>CPPNeuronMesher Team </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-07-27 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>MIT License </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://github.com/yourusername/refactoredCPPNeuronMesher">https://github.com/yourusername/refactoredCPPNeuronMesher</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae49f0c4c2064be8fbcf555f46460b7df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae49f0c4c2064be8fbcf555f46460b7df">&#9670;&nbsp;</a></span>cursorPosCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cursorPosCallback </td>
          <td>(</td>
          <td class="paramtype">GLFWwindow *&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xpos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ypos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles mouse cursor movement for view manipulation. </p>
<p>Handles mouse cursor movement.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">window</td><td>The GLFW window that received the event </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xpos</td><td>The new x-coordinate of the cursor, in screen coordinates </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ypos</td><td>The new y-coordinate of the cursor, in screen coordinates</td></tr>
  </table>
  </dd>
</dl>
<p>This callback function processes mouse movement to implement interactive 3D view manipulation. It provides the following functionality:</p><ul>
<li>Left-drag: Rotates the view around the X and Y axes</li>
<li>Right-drag: Pans the view in the X and Y directions</li>
</ul>
<p>The function uses the difference between the current and last cursor positions to calculate the amount of rotation or panning to apply. The actual view transformation is applied in the main rendering loop using the global state variables modified by this function.</p>
<dl class="section note"><dt>Note</dt><dd>The function updates the lastX and lastY variables to track cursor movement between frames </dd>
<dd>
Rotation and panning speeds are scaled by constant factors (0.3f and 1.5f) </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="callbacks_8h.html#ae41a3951e1196401047b29ad1d37c6ae" title="Handles mouse button input events.">mouseButtonCallback()</a> for enabling/disabling rotation and panning </dd>
<dd>
GLFW cursor position documentation: <a href="https://www.glfw.org/docs/latest/input_guide.html#cursor_pos">https://www.glfw.org/docs/latest/input_guide.html#cursor_pos</a> </dd></dl>

</div>
</div>
<a id="a0b9e239c8889734711f29fe45551605b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b9e239c8889734711f29fe45551605b">&#9670;&nbsp;</a></span>keyCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keyCallback </td>
          <td>(</td>
          <td class="paramtype">GLFWwindow *&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scancode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mods</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles keyboard input events for the neuron viewer. </p>
<p>Handles keyboard input events.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">window</td><td>The GLFW window that received the event </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The keyboard key that was pressed or released </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">scancode</td><td>The system-specific scancode of the key </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">action</td><td>The key action (GLFW_PRESS, GLFW_RELEASE, or GLFW_REPEAT) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mods</td><td>Bit field describing which modifier keys were held down</td></tr>
  </table>
  </dd>
</dl>
<p>This callback function processes keyboard input for controlling the neuron viewer. It implements the following keyboard shortcuts:</p><ul>
<li>F: Refine neuron geometry (halve delta)</li>
<li>Ctrl+F: Coarsen neuron geometry (double delta)</li>
<li>1-6: Switch between different render modes</li>
<li>O: Open a neuron file dialog</li>
<li>R: Reset camera view</li>
<li>H: Show/hide help window</li>
<li>S: Save the current neuron data to file</li>
</ul>
<p>The function modifies global state for view parameters and triggers updates to the neuron visualization when geometry is refined or coarsened.</p>
<dl class="section note"><dt>Note</dt><dd>The function only processes key press events (GLFW_PRESS) </dd>
<dd>
Modifier keys (Ctrl, Shift, Alt) are checked using the mods parameter </dd></dl>
<dl class="section see"><dt>See also</dt><dd>GLFW key documentation: <a href="https://www.glfw.org/docs/latest/input_guide.html#input_key">https://www.glfw.org/docs/latest/input_guide.html#input_key</a> </dd></dl>

</div>
</div>
<a id="ae41a3951e1196401047b29ad1d37c6ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae41a3951e1196401047b29ad1d37c6ae">&#9670;&nbsp;</a></span>mouseButtonCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mouseButtonCallback </td>
          <td>(</td>
          <td class="paramtype">GLFWwindow *&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>button</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mods</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles mouse button events for 3D view manipulation. </p>
<p>Handles mouse button input events.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">window</td><td>The GLFW window that received the event </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">button</td><td>The mouse button that was pressed or released </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">action</td><td>The button action (GLFW_PRESS or GLFW_RELEASE) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mods</td><td>Bit field describing which modifier keys were held down</td></tr>
  </table>
  </dd>
</dl>
<p>This callback function processes mouse button events to enable interactive 3D view manipulation. It tracks the following interactions:</p><ul>
<li>Left mouse button: Enables view rotation when dragged</li>
<li>Right mouse button: Enables view panning when dragged</li>
</ul>
<p>The function updates global state variables (dragging, rightDragging) that are used by cursorPosCallback to implement the actual view transformations.</p>
<dl class="section note"><dt>Note</dt><dd>The function tracks both press and release events for smooth interaction </dd>
<dd>
The cursor position is captured on button press for relative movement </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="callbacks_8h.html#ae49f0c4c2064be8fbcf555f46460b7df" title="Handles mouse cursor movement.">cursorPosCallback()</a> for the implementation of the actual view transformations </dd>
<dd>
GLFW mouse button documentation: <a href="https://www.glfw.org/docs/latest/input_guide.html#input_mouse_button">https://www.glfw.org/docs/latest/input_guide.html#input_mouse_button</a> </dd></dl>

</div>
</div>
<a id="aa9b224479e8c1cc5251b8e7f3fdabacd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9b224479e8c1cc5251b8e7f3fdabacd">&#9670;&nbsp;</a></span>scrollCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scrollCallback </td>
          <td>(</td>
          <td class="paramtype">GLFWwindow *&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>yoffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles mouse scroll wheel events for zooming the view. </p>
<p>Handles mouse scroll events.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">window</td><td>The GLFW window that received the event </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xoffset</td><td>The scroll offset along the x-axis (unused in this implementation) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">yoffset</td><td>The scroll offset along the y-axis (positive for scroll up, negative for scroll down)</td></tr>
  </table>
  </dd>
</dl>
<p>This callback function processes mouse scroll wheel input to implement smooth zooming of the 3D view. It modifies the global zoom factor based on the vertical scroll amount.</p>
<p>The zoom factor is adjusted using an exponential scale (1.1^yoffset) to provide natural-feeling zoom behavior. The zoom level is clamped between 0.05 and 10.0 to prevent extreme zoom levels that might cause rendering issues or numerical instability.</p>
<dl class="section note"><dt>Note</dt><dd>The xoffset parameter is currently unused but included for future compatibility </dd>
<dd>
Zooming is centered on the current view (no focal point adjustment) </dd>
<dd>
The 1.1 base value provides a good balance between precision and responsiveness </dd></dl>
<dl class="section see"><dt>See also</dt><dd>GLFW scroll documentation: <a href="https://www.glfw.org/docs/latest/input_guide.html#scrolling">https://www.glfw.org/docs/latest/input_guide.html#scrolling</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
